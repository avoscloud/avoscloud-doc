
# 基于 LeanCloud 构建行业解决方案 - 餐饮外卖行业

本文旨在针对帮助不同行业的应用开发者解决服务选型和服务选择上的顾虑和疑惑。

## 跨行业与互联网的结合

## 初期选型

一个准备解决行业痛点、以技术为原创动力的团队在初期都会面临技术架构上面的挑战：

> 第一个问题是网站怎么搞？

团队已有如下资源和技术能力：

- 前端技术人员可以使用最先进的前端框架（Vue/React/Angular）
- 后端技术人员有足够的技术实力搞定任意一种数据库（mysql/mongodb/Oracle）
- 运维技术人员可以长期稳定地维护一个集群的 Web Server（nginx/Apache）

如果使用 IaaS 服务，从群集服务器（物理机/虚拟机）+ 数据库集群 + Web Server 集群开始研发自己的应用服务，这里面的成本太高，这样很有可能错过投资的风口，或者被潜在的竞争对手抢先发布了产品夺得先机。现如今时间是最昂贵的成本，通过使用现成的各类服务，可以大大缩短产品首个版本的上线时间。

### 网站托管 - 云引擎

LeanCloud 云引擎（LeanEngine）就是大家熟知的 PaaS 服务模式——用户可以将自己的 Web 项目部署到云引擎上。它支持 PHP、Python、Java、Node.JS 等诸多运行时，支持动态扩容等许多智能化的运维操作，并且后台可配置项对于前端工程师来说容易理解 和使用，因此一个熟练的 Web 团队在使用云引擎的时候，几乎与使用传统的 PaaS 服务没有差别，并且可以省去很多原本需要后端工程师才能完成的复杂的底层运维。

更多详细介绍请参考：

- [网站托管开发指南 · Node.js](leanengine_webhosting_guide-node.html)
- [网站托管开发指南 · Python](leanengine_webhosting_guide-python.html)
- [网站托管开发指南 · PHP](leanengine_webhosting_guide-php.html)
- [网站托管开发指南 · Java](leanengine_webhosting_guide-java.html)

### 数据库 - LeanCloud 云存储

Web 页面展现的数据来源于项目本身的数据库，LeanCloud 数据存储（LeanStorage）就相当于一个云端数据库，它的优势在于前端工程师只需要掌握相应语言的 SDK 接口，如 PHP、Python、Java、Node.JS，就可以实现对数据的增删改查。

- [数据存储开发指南 · JavaScript](leanstorage_guide-js.html)
- [数据存储开发指南 · Python](leanstorage_guide-python.html)
- [数据存储开发指南 · PHP](leanstorage_guide-php.html)
- [数据存储开发指南 · Java](leanstorage_guide-java.html)

### 网站相关

- 支持独立域名绑定，支持备案绑定。
- 支持多版本多实例，可以在不同的实例上部署不同版本的页面，便于开发测试与生产环境分离。
- 支持流量分析、客户端 IP 获取等自定义的数据分析。

## 前期研发

不同行业有着各自的功能需求，我们先从简单的行业入手，阐述一下中期迭代时的一些基础架构的服务选型。

### 外卖
外卖的商业模式比较简单易懂，我们假设现在网站已经搞好了，并且使用 LeanStorage 构建了一个具有基础电商功能的网站：

- 餐品和店面的列表浏览
- 餐品和店面的详情
- 在线下单
- 在线付款
- 个人资料的管理
- 餐品/服务评价

上述所有需要用到的数据存储服务都可以使用 LeanStorage 进行增删改查，最有可能遇到的难点是各种数据表之间的关系建模，开发者只要按照我们的 [数据模型设计指南](https://leancloud.cn/docs/relation-guide.html) 来建模就可以迅速完成这一挑战。

## 中期迭代
当网站的业务量上来时，就要开始组建开发移动客户端的团队，目标是要做出一个与网站用户体验差别不大、并且拥有额外移动特性的产品：

- 一键下单
- 推荐好友返利
- 抢红包
- 微信等社交网络分享
- 订单状态的实时跟踪
- 物流状态的消息推送
- 餐厅搜索和地图标识

这些功能均可以通过 LeanCloud 服务和一些第三方厂商的 SDK 来实现。

功能|对应的 LeanCloud 服务模块|接入方式
--|--|--
一键下单|数据存储|SDK
推荐好友返利|数据存储 / 推送|SDK
抢红包|数据存储 / 推送 / LiveQuery + BeeCloud |SDK
微信等社交网络分享|数据存储|SDK / 微信 SSO 登录模块
物流状态的消息推送|推送|SDK
餐厅搜索和地图标识|数据存储 + 高德地图 API|SDK

## 后期稳固
在产品迭代进入稳定期、基本功能都已经完备之后，团队开始需要着手进行推广和运营，这个时候需要一个强大的统计数据分析服务来支撑运营。

LeanAnalytics 是 LeanCloud 旗下一款专门面向运营人员的统计数据分析服务，它可以展示用户的行为轨迹和打开应用的频次以及各种自定义的统计事件，并且还可以根据应用分发的渠道来了解渠道的有效转化比之类的统计指标。

![app-guide-analytics](images/app-guide-analytics.png)

配合推送数据统计，运营人员能了解到客户端用户打开推送的概率和频次。

而网站的运维也无需专业人员负责，云引擎有日志和统计服务，可以检测观察网站的访问流量变化等等。

### 市场运营

为了适应新的推广形式，我们也推出了专门针对抢红包活动的解决方案，详细请参考 [抢红包、秒杀购物开发参考](leanengine_examples.html#LeanCache_常见场景示例)。


## 总结

总而言之，基础的技术架构早已不是技术壁垒，通用的开箱即用的云服务也已经被广大的开发者所接受了，LeanCloud 想做的就是帮助开发者将自己的研发实力用到最核心的业务系统中，而不要再纠缠于选哪家 IaaS 厂商，用 Ubuntu 还是 CentOS，用 MySQL 的什么版本等等这些几乎所有团队都要去烦恼的事情。先撸起袖子做自己最擅长的事情，把琐碎的杂事交给 LeanCloud，放飞团队的创造力，轻装前行才是创业者应该有的态度。

