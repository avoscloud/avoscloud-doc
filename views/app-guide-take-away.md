
# 基于 LeanCloud 构建行业解决方案 - 餐饮外卖行业

本文旨在针对帮助不同行业的应用开发者解决服务选型和服务选择上的顾虑和疑惑。

## 跨行业与互联网的结合

## 初期选型

一个准备解决行业痛点、以技术为原创动力的团队在初期都会面临技术架构上面的挑战：

> 第一个问题是网站怎么搞？

首先我团队已经用了如下的人员配置和对应的技能：

- 前端技术人员运用最先进的前端框架 （vue/React/Angular）
- 后端技术人员也拥有足够的技术实力搞定任意一种数据库（mysql/mongodb/Oracle）
- 运维技术人员可以长期稳定的维护一个集群的 Web Server(nginx/Apache)

如果使用 IaaS 服务从群集服务器（物理机/虚拟机）+ 数据库集群 + Web Server 集群开始研发自己的应用服务，这里面的成本太高，并且可能错过了投资的风口，或者又有潜在的竞争对手领先发布竞品。

前文已经说了，本文的目的是为服务选型解惑的，因此针对一个项目的 Web 页面的解决方案在 LeanCloud 已经提供了全套服务。

### Web Hosting - 使用 LeanEngine

LeanEngine 的一句话简称就是大家熟知的 PaaS 服务模式，用户可以部署自己的 Web 项目在 LeanEngine 上，支持主流的 PHP、Python、Java、NodeJS 等诸多运行时，它支持动态扩容等许多智能化的运维操作，并且后台可配置项都是向前端工程师友好的技术术语，因此一个熟练的 Web 团队在使用云引擎的时候，几乎是无差别的在使用传统的 PaaS 服务，并且省去了很多需要后端工程师配合的复杂的底层技术运维。

更多详细介绍直达链接:

- [网站托管开发指南 · Node.js](leanengine_webhosting_guide-node.html)
- [网站托管开发指南 · Python](leanengine_webhosting_guide-python.html)
- [网站托管开发指南 · PHP](leanengine_webhosting_guide-php.html)
- [网站托管开发指南 · Java](leanengine_webhosting_guide-java.html)

### DataBase - 使用 LeanStorage

LeanStorage 的概念相当于一个数据库，而他的优势是在于前端工程师只需要掌握如何使用 LeanStorage SDK for PHP、Python、Java、NodeJS 这些语言的接口，就可以实现数据的增删改查。

Web 页面展现的数据来源于项目本身的数据库，而 LeanStorage 正好提供了数据存储的服务可以满足前端页面所需要的增删改查的功能并且提供了丰富的 SDK 接口方便使用：

- [数据存储开发指南 · JavaScript](leanstorage_guide-js.html)
- [数据存储开发指南 · Python](leanstorage_guide-python.html)
- [数据存储开发指南 · PHP](leanstorage_guide-php.html)
- [数据存储开发指南 · Java](leanstorage_guide-java.html)

### 网站相关

- 支持独立域名绑定，支持备案绑定。
- 支持多版本多实例，可以在不同的实例上部署不同版本的页面，便于开发测试与生产环境分离
- 支持流量分析，客户端 IP 获取等自定义的数据分析

> 在如今互联网创业热潮加上互联网+的概念热炒之下，时间是最昂贵的成本，使用现成的服务可以加速自己产品的第一个版本的上线

## 前期研发
在这里就因为行业的不同就会出现很多的功能需求不一样，我们先从简单的行业入手，阐述一下中期迭代时的一些基础架构的服务选型。

### 外卖
外卖的商业模式比较简单易懂，我们假设现在网站已经搞好了，并且使用 LeanStorage 构建了一个带有电商基础功能的网站：

- 餐品和店面的列表浏览
- 餐品和店面的详情
- 在线下单
- 在线付款
- 个人资料的管理
- 餐品/服务评价

上述所有需要用到的数据存储服务都可以使用 LeanStorage 进行增删改查。而在此处唯一可能遇到的难点是各种表之间的关系建模，而我们已经提供了现成的[数据模型设计指南](https://leancloud.cn/docs/relation-guide.html)帮助开发者迅速的将当前业务场景的关系对应到 SDK 的接口。

## 中期迭代
中期的前提是网站的业务量上来了，现在开始组建客户端的开发团队，希望做一个与网站用户体验差别不大，并且额外拥有移动应用特性的一些功能。

- 一键下单
- 推荐好友返利
- 抢红包
- 微信等社交网络分享
- 订单状态的实时跟踪
- 物流状态的消息推送
- 餐厅搜索和地图标识


很高兴的一件事情是，以上这些功能的服务模块，LeanCloud 也都有提供。

功能|对应的服务模块|接入方式
--|--|--
一键下单|LeanStorage|SDK
推荐好友返利|LeanStorage/LeanPush|SDK
抢红包|LeanStorage/LeanPush/LiveQuery + BeeCloud |SDK
微信等社交网络分享|LeanStorage|SDK/微信 SSO 登录模块
物流状态的消息推送|LeanPush|SDK
餐厅搜索和地图标识|LeanStorage + 高德地图 API|SDK


以上的功能模块在使用 LeanCloud 加上一些第三方厂商的服务模块之后，就可以构建一个很健壮的客户端应用了。

## 后期稳固
在产品迭代进入稳定期，基本功能都已经完备之后，团队开始需要着手进行推广和运营，这个时候需要一个强大的统计数据分析服务来支撑运营。

LeanAnalytics 是 LeanCloud 旗下一款专门针对运营人员提供的统计数据分析服务，它可以展示近一个星期用户的行为轨迹和打开应用的频次以及各种自定义的统计事件，并且还可以根据应用分发的渠道来了解渠道的有效转化比之类的多种类型的数据。

![app-guide-analytics](images/app-guide-analytics.png)

而配合控制台的推送数据统计可以知道客户端用户在打开推送的概率和频次。

而网站的运维也无需专业人员负责，LeanEngine 自身也有日志和统计服务，可以检测观察网站的访问流量变化等等。

### 市场运营

为了适应新的推广形式，我们也推出了专门针对抢红包活动的解决方案，详细请参考：[抢红包、秒杀购物开发参考](leanengine_examples.html#LeanCache_常见场景示例)。


## 回归总结

总而言之，在如今是个创业团队就敢说自己是互联网创业的时代，基础的技术架构早已不是技术壁垒，通用的开箱即用的云服务也已经被广大的开发者所接受了，LeanCloud 想做的就是帮助开发者今早的将自己的研发实力用到最核心的业务系统中，而不要再纠缠于选哪家 IaaS 厂商，用 Ubunt 还是 CentOS ，用 MySQL 的什么版本，这类几乎所有的团队都要去烦恼的事情了，先撸起袖子做自己最擅长的事情，把琐碎的杂事交给 LeanCloud ，放飞团队的创造力，轻装前行才是创业者应该有的态度。

