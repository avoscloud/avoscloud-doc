# 多人对战 Server 服务总览

在查看本文档前，请先查看[多人在线对战服务总览](multiplayer.html)了解相关概念及客户端的使用方法。

在[多人在线对战服务](multiplayer.html)中，LeanCloud 所有的应用共享使用同一个公有集群，每一个应用都和其他应用共享资源。现在我们为每一个应用单独部署服务端代码，使得每一个应用可以独享资源，每一个应用独享的 Server 被我们称为多人对战的独立 Server。

在多人对战的独立 Server 中我们提供了特定事件发生时自动触发的 Hook 函数供开发者撰写自己在 Server 端的逻辑。您只需要专注于自己的游戏逻辑，LeanCloud 来负责多实例负载均衡、自动扩容、平滑部署等运维工作。

## 基础架构

![image](images/multiplayer-server-intro.png)

从图中可以看出，多人对战 Server 负责提供[多人在线对战服务](multiplayer.html)中的全部功能，例如匹配、创建房间、房间内事件等。如果您希望在 Server 中撰写一部分逻辑，这部分代码需要写在 Plugin 的 hook 函数中。

您依然可以使用 [Client Engine](client-engine.html) 接入多人对战 Server，例如您可能希望用 Client Engine 来控制房间创建的时机或撰写自己的 AI Client。

## 和公有云的对比

| 功能   | 公有云   |  独立 Server  |
|----------|----------|---------------|
| 资源使用方式 | 所有应用共享同一个资源池。 | 独享资源，根据使用情况自动扩容。 |
| 自动扩容 | 支持 | 支持 |
| 负载均衡 | 支持 | 支持 |
| 平滑部署 | 支持 | 支持 |
| 服务端逻辑 | 通过 Client Engine 来实现。 | 通过 Client Engine 及 Hook 函数来实现。 |
| 房间最大人数 | 10 人 | 可自行调节 |
| 房间内最大平均消息速率 | 500 msg/s | 可自行调节 |
| 消息体大小 | 5 KB | 可自行调节 |
| 房间自定义属性大小 | 1 KB | 可自行调节 |
| 玩家自定义属性大小 | 1 KB | 可自行调节 |

请注意，虽然独立 Server 中很多参数可以不受限制自行调节，但数值越大也意味着大量的资源消耗以及更慢的传输速度，因此请不要随意调节数值并尽可能降低数值。

## 文档
* [多人对战 Server 快速入门 &middot; Java](multiplayer-server-quick-start-java.html)。介绍了从初始项目开始，如何本地开发调试，如何部署到云端。
* [多人对战 Server 开发指南 &middot; Java](multiplayer-server-guide-java.html)。详细介绍了如何使用 Plugin 撰写自己的游戏逻辑。

## 价格及试用
目前仅在**华东节点**提供多人对战 Server 服务。公测期间免费使用，开发版最大可使用 100% CPU，商用版最大可使用 200% CPU，如果您需要更高额度，请联系 support@leancloud.rocks。

未来收费方案如下：

一个计费单元包含 100 CCU 及 100% CPU。一个计费单元价格为：

* 国内节点每天 ¥8 。
* 国际节点每天 $2 。

扣费时按照使用的计费单元来扣费。例如一个应用使用了 50 CCU / 200% CPU ，则按 CPU 计算使用了 2 个计费单元，国内节点每天收费 16 元。


## 私有化部署
如果您希望将多人对战 Server 部署在自己的服务器中，请联系 support@leancloud.rocks。

## 在线交流
为了能及时解答大家的疑问，进一步了解游戏开发者的需求和使用场景，我们建立了游戏开发群，欢迎各位游戏开发者加入。[详情 >>>](https://forum.leancloud.cn/t/leancloud-qq/19389)

## 使用其他服务

* 持久化数据存储，例如存储玩家的装备信息、等级信息等。请参考 [数据存储服务总览](storage_overview.html)。
* 游戏内聊天，例如世界聊天、好友聊天、帮会聊天等。请参考 [即时通讯服务总览](realtime_v2.html)。
* 排行榜，例如玩家等级世界排名等。请参考 [排行榜服务总览](leaderboard.html)。
